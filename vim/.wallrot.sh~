#!/bin/sh

##########################################################################
##              Wallpaper rotator by Christian Brassat                  ##
##    __         __    __    __           __ __                         ##
##   /\ \      /'__`\ /\ \__/\ \__       /\ \\ \                        ##
##   \ \ \/'\ /\_\L\ \\ \ ,_\ \ ,_\   ___\ \ \\ \    _ __               ##
##    \ \ , < \/_/_\_<_\ \ \/\ \ \/  /'___\ \ \\ \_ /\`'__\             ##
##     \ \ \\`\ /\ \L\ \\ \ \_\ \ \_/\ \__/\ \__ ,__\ \ \/              ##
##      \ \_\ \_\ \____/ \ \__\\ \__\ \____\\/_/\_\_/\ \_\              ##
##       \/_/\/_/\/___/   \/__/ \/__/\/____/   \/_/   \/_/              ##
##                                                                      ##
##                          GNU GPLv3 2009                              ##
##########################################################################

##########################################################################
# Settings
##########################################################################

displaytime="1"                        # Minutes every wallpaper should be displayed
directory="/home/flako/Pictures/VÃ¤ggpapper"              # Directory containing the walls to be switched
loop="true"                             # Loop or no loop - values: true or false

##########################################################################
# Script (do not change unless you know what you're doing)
##########################################################################

let "displaytime *= 60"                 # Converts minutes to seconds for 'sleep' function

# Loops wallpapers when 'loop = true'
while [ $loop = "true" ]
do
     for i in $(ls $directory)
     do
          feh --bg-scale $directory/$i
          sleep $displaytime
     done
done

# Switches to random wallpaper when 'loop = false'
if [ $loop = "false" ]
then
     # Creates an array from all wallpapers
     files=($directory/*.*)           # create an array of the files.
     N=${#files[@]}                     # Number of members in the array
     ((N=RANDOM%N))
     randomfile=${files[$N]}

     # Sets wallpaper from random file
     feh --bg-scale $randomfile
fi
